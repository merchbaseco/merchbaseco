---
import { Card } from "@/components/ui/card";
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"a"> {
  href: string;
  title: string;
  description: string;
  datetime: string;
  displayDate: string;
  tag?: string;
  accent?: string;
}

const {
  accent,
  class: classAttr = "",
  datetime,
  description,
  displayDate,
  href,
  tag,
  title,
  ...anchorAttributes
} = Astro.props as Props;

const linkClass =
  "group block focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-4 focus-visible:ring-offset-white";

const accentBackground =
  accent ??
  "radial-gradient(120% 120% at 10% 0%, rgba(192, 228, 255, 0.9) 0%, rgba(240, 244, 248, 0.7) 35%, rgba(209, 247, 226, 0.85) 100%)";
---

<a href={href} class={[linkClass, classAttr].filter(Boolean).join(" ")} {...anchorAttributes}>
  <Card class="flex flex-col overflow-hidden border-gray-100 bg-white !p-0 transition duration-200 ease-out hover:-translate-y-1 hover:shadow-md sm:flex-row">
    <div aria-hidden="true" class="relative w-full overflow-hidden bg-gray-100 sm:w-56 lg:w-64">
      <div class="absolute inset-0" style={`background-image: ${accentBackground}`}>
      </div>
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_70%_40%,rgba(255,255,255,0.8)_0%,rgba(255,255,255,0)_60%)] mix-blend-lighten"></div>
      <div class="relative h-48 w-full sm:h-full"></div>
    </div>

    <div class="flex flex-1 flex-col justify-between p-8 sm:p-10">
      <div>
        <div class="flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-[0.3em] text-gray-400">
          {tag && (
            <span class="rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] tracking-[0.35em] text-gray-500">
              {tag}
            </span>
          )}
          <time datetime={datetime}>{displayDate}</time>
        </div>

        <h3 class="mt-4 text-2xl font-semibold leading-snug text-gray-900 transition group-hover:text-gray-700">
          {title}
        </h3>
        <p class="mt-3 text-base text-gray-600">{description}</p>
      </div>

      <span class="mt-8 inline-flex items-center gap-2 text-sm font-semibold text-emerald-600 transition group-hover:text-emerald-700">
        Read article
        <svg
          class="h-4 w-4 transition-transform duration-200 group-hover:translate-x-1"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          aria-hidden="true"
        >
          <title>Arrow icon</title>
          <path d="M5 12h14"></path>
          <path d="m12 5 7 7-7 7"></path>
        </svg>
      </span>
    </div>
  </Card>
</a>
