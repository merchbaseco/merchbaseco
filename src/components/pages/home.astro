---
import ProductCard from "@/components/ui/product-card.astro";
import { Squircle } from "@/components/ui/squircle";
import { HugeiconsIcon } from "@merchbaseco/icons";
import { Shirt01Icon } from "@merchbaseco/icons/core-solid-rounded";
import {
    BookOpen01Icon,
    Home01Icon,
    InformationCircleIcon,
} from "@merchbaseco/icons/core-stroke-rounded";
import type { CollectionEntry } from "astro:content";
import NavItem from "../nav-item.astro";
import {
    LinkSquare01BulkRounded,
    Shirt01BulkRounded,
    ShoppingBag03BulkRounded,
    VictoryFinger03BulkRounded,
} from "@merchbaseco/icons/core-bulk-rounded";
import { LassoTool01Icon } from "@merchbaseco/icons/core-stroke-sharp";
import { ChromeIcon } from "@merchbaseco/icons/core-bulk-rounded";
import { SafariIcon } from "@merchbaseco/icons/core-solid-rounded";

const isHomePage = Astro.url.pathname === "/";
const isAboutPage = Astro.url.pathname.startsWith("/about");

interface Props {
    recentPosts?: Array<CollectionEntry<"blog">>;
}

const { recentPosts = [] } = Astro.props as Props;

const site = Astro.site ?? new URL("http://localhost/");
const homeHref = new URL("./", site).pathname;
const aboutHref = new URL("./about/", site).pathname;
const blogPostHref = (slug: string) =>
    new URL(`./blog/${slug}/`, site).pathname;

const formatDate = (date: Date) =>
    date.toLocaleDateString("en-US", {
        month: "short",
        day: "numeric",
        year: "numeric",
    });
---

<div class="min-h-screen bg-white">
    <div class="w-full mt-4 px-9">
        <h2 class="text-[44px] font-normal leading-12">
            We build bespoke tools for <div
                class="inline-flex gap-1 text-blue-600 font-semibold items-center relative -bottom-1.5"
            >
                <HugeiconsIcon
                    icon={Shirt01BulkRounded}
                    size={44}
                    color="currentColor"
                    className="transition-colors"
                /><div>Print on Demand</div>
            </div>
            sellers
        </h2>
        <h2 class="text-[44px] font-normal leading-12 -mt-2">
            rooted in quality, beauty, and integrity.
        </h2>
        <h4 class="mt-4 text-xl max-w-[1100px] w-full leading-10">
            Started by Zach Knickerbocker, an experienced PoD seller,
            MerchBase's core mission is to bring truly quality tools to the
            space without the headaches of constant bugs, predatory
            subscriptions, and other unscrupulous practices.
        </h4>
    </div>

    <main class="mt-10 px-9">
        <div class="flex gap-6">
            <ProductCard
                cornerRadius={30}
                cornerSmoothing={1}
                className="bg-[#DC6D3E] text-white font-mono w-96"
            >
                <div class="absolute top-6 right-6">
                    <HugeiconsIcon
                        icon={LinkSquare01BulkRounded}
                        size={32}
                        color="currentColor"
                        className="transition-colors"
                    />
                </div>
                <div class="h-full w-full flex-col justify-end"></div>

                <div
                    class="size-64 absolute top-0 left-16 flex flex-col justify-end items-center"
                    style={{
                        backgroundImage: 'url("/unicorn-shirt.png")',
                        backgroundSize: "cover",
                        backgroundPosition: "center",
                    }}
                >
                    <div class="text-2xl font-mono font-bold">#864,000</div>
                    <div
                        class="text-lg font-mono opacity-80 font-medium -mt-1 -mb-4"
                    >
                        BSR
                    </div>
                </div>

                <div
                    class="size-64 absolute -top-12 -left-24 -z-10 flex flex-col justify-end items-center scale-[.85] blur-[4px] -rotate-6"
                    style={{
                        backgroundImage: 'url("/vibes-shirt.png")',
                        backgroundSize: "cover",
                        backgroundPosition: "center",
                    }}
                >
                    <div class="text-2xl font-mono font-bold">#1,235,000</div>
                </div>

                <div
                    class="size-64 absolute top-12 -right-24 -z-10 flex flex-col justify-end items-center scale-[.85] blur-[4px] rotate-6"
                    style={{
                        backgroundImage: 'url("/rocket-shirt.png")',
                        backgroundSize: "cover",
                        backgroundPosition: "center",
                    }}
                >
                    <div class="text-2xl font-mono font-bold">#184,000</div>
                </div>

                <div>
                    <h3 class="text-3xl mb-2 font-bold">RankWrangler</h3>
                    <p
                        class="mb-6 font-mono font-medium tracking-tight text-[17px] opacity-90"
                    >
                        See BSR's and listing data directly in Amazon Search
                        results.
                    </p>
                    <div class="flex justify-between items-center">
                        <div
                            class="rounded-lg px-3 bg-[#ffd0ba] items-center flex gap-0 leading-5 text-[#612205]"
                        >
                            <span
                                class="font-mono text-sm uppercase font-medium"
                                >FREE</span
                            >
                            <div class="h-7 w-px bg-[#DC6D3E] shrink-0 mx-3">
                            </div>
                            <span
                                class="font-mono text-sm uppercase font-medium"
                                >BROWSER EXTENSION</span
                            >
                        </div>
                        <div class="flex gap-2 items-center">
                            <HugeiconsIcon
                                icon={ChromeIcon}
                                size={24}
                                color="currentColor"
                                className="transition-colors text-[#ffd0ba]"
                            />
                            <HugeiconsIcon
                                icon={SafariIcon}
                                size={24}
                                color="currentColor"
                                className="transition-colors text-[#ffd0ba]"
                            />
                        </div>
                    </div>
                </div>
            </ProductCard>
            <ProductCard
                cornerRadius={30}
                cornerSmoothing={1}
                className="bg-gray-200/60 text-black w-96 hover:scale-100"
            >
                <div class="h-full w-full flex-col justify-end"></div>

                <div class="flex justify-between items-center">
                    <div
                        class="rounded-lg px-3 bg-gray-300/80 items-center flex gap-0 leading-5 text-gray-800 h-7"
                    >
                        <span class="font-mono text-sm uppercase font-medium"
                            >COMING SOON</span
                        >
                    </div>
                </div>
            </ProductCard>
        </div>
    </main>
    <div
        class="mt-10 text-[100px] -z-50 text-gray-300 font-black font-display -mb-[70px] ml-9 scale-y-105"
    >
        Everything Else
    </div>
    {
        recentPosts.length > 0 && (
            <section class="bg-gray-300/20 border-t backdrop-blur-sm backdrop-hue-rotate-30 pt-20 pb-9 pl-9 relative z-50">
                <div
                    class="grid gap-6 justify-items-start"
                    style={{
                        gridTemplateColumns:
                            "repeat(auto-fit, minmax(24rem, max-content))",
                    }}
                >
                    {recentPosts.map((post) => (
                        <Squircle
                            key={post.id}
                            cornerRadius={24}
                            cornerSmoothing={0.8}
                            className="group relative flex w-96 h-72 flex-col justify-between rounded-3xl border border-gray-200 bg-white p-6 shadow-sm transition-all duration-200 hover:-translate-y-1 hover:shadow-md"
                        >
                            <div class="flex flex-1 flex-col justify-between">
                                <div>
                                    <h3 class="text-xl font-semibold pr-16">
                                        {post.data.title}
                                    </h3>
                                    <p class="mt-3 text-gray-600 leading-7">
                                        {post.data.description}
                                    </p>
                                </div>
                                <div class="flex justify-end">
                                    <div class="bg-gray-100 uppercase text-sm rounded-lg px-2 h-8 flex items-center tracking-wide text-indigo-600">
                                        {formatDate(post.data.publishDate)}
                                    </div>
                                </div>
                                <a
                                    class="absolute block top-6 right-6 opacity-50 group-hover:opacity-100"
                                    href={blogPostHref(post.slug)}
                                >
                                    <HugeiconsIcon
                                        icon={LinkSquare01BulkRounded}
                                        size={32}
                                        color="currentColor"
                                        className="transition-colors"
                                    />
                                </a>
                            </div>
                        </Squircle>
                    ))}

                    {[1, 2, 3, 4, 5, 6].map((value) => (
                        <Squircle
                            key={value}
                            cornerRadius={24}
                            cornerSmoothing={0.8}
                            className="group relative flex w-96 h-72 flex-col justify-between rounded-3xl bg-gray-200/60 p-6 shadow-sm"
                        />
                    ))}
                </div>

                <div class="text-base text-gray-600 flex gap-6 mt-24">
                    <div>
                        Copyright © 2025 MerchBase, LLC. All rights reserved.
                    </div>
                    <div>/</div>
                    <div>Terms of service</div>
                    <div>/</div>
                    <div>Privacy policy</div>
                </div>
            </section>
        )
    }
</div>
