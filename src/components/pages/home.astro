---
import ProductCard from "@/components/ui/product-card.astro";
import { Squircle } from "@/components/ui/squircle";
import { HugeiconsIcon } from "@merchbaseco/icons";
import { Shirt01Icon } from "@merchbaseco/icons/core-solid-rounded";
import {
    BookOpen01Icon,
    Home01Icon,
    InformationCircleIcon,
} from "@merchbaseco/icons/core-stroke-rounded";
import type { CollectionEntry } from "astro:content";
import NavItem from "../nav-item.astro";
import {
    LinkSquare01BulkRounded,
    Shirt01BulkRounded,
    ShoppingBag03BulkRounded,
    VictoryFinger03BulkRounded,
} from "@merchbaseco/icons/core-bulk-rounded";
import { LassoTool01Icon } from "@merchbaseco/icons/core-stroke-sharp";
import { ChromeIcon } from "@merchbaseco/icons/core-bulk-rounded";
import { SafariIcon } from "@merchbaseco/icons/core-solid-rounded";

const isHomePage = Astro.url.pathname === "/";
const isBlogPage = Astro.url.pathname.startsWith("/blog");
const isAboutPage = Astro.url.pathname.startsWith("/about");

interface Props {
    recentPosts?: Array<CollectionEntry<"blog">>;
}

const { recentPosts = [] } = Astro.props as Props;

const site = Astro.site ?? new URL("http://localhost/");
const homeHref = new URL("./", site).pathname;
const aboutHref = new URL("./about/", site).pathname;
const blogHref = new URL("./blog/", site).pathname;
const blogIndexHref = new URL("./blog/", site).pathname;
const blogPostHref = (slug: string) =>
    new URL(`./blog/${slug}/`, site).pathname;

const formatDate = (date: Date) =>
    date.toLocaleDateString("en-US", {
        month: "short",
        day: "numeric",
        year: "numeric",
    });
---

<div class="min-h-screen bg-white">
    <div class="w-full mt-10 px-9">
        <h2 class="text-[44px] font-normal leading-12">
            We build bespoke tools for <div
                class="inline-flex gap-1 text-blue-600 font-semibold items-center relative -bottom-1.5"
            >
                <HugeiconsIcon
                    icon={Shirt01BulkRounded}
                    size={44}
                    color="currentColor"
                    className="transition-colors"
                    aria-hidden="true"
                /><div>Print on Demand</div>
            </div>
            sellers
        </h2>
        <h2 class="text-[44px] font-normal leading-12 -mt-2">
            rooted in quality, beauty, and integrity.
        </h2>
        <h4 class="mt-4 text-xl max-w-[1100px] w-full leading-9">
            Started by Zach Knickerbocker, an experienced PoD seller,
            MerchBase's core mission is to bring truly quality tools to the
            space without the headaches of constant bugs, predatory
            subscriptions, and other unscrupulous practices.
        </h4>
    </div>

    <main class="mt-8 px-9">
        <div class="flex gap-6">
            <ProductCard
                cornerRadius={30}
                cornerSmoothing={1}
                className="bg-[#DC6D3E] text-white font-mono w-96"
            >
                <div class="absolute top-6 right-6">
                    <HugeiconsIcon
                        icon={LinkSquare01BulkRounded}
                        size={32}
                        color="currentColor"
                        className="transition-colors"
                        aria-hidden="true"
                    />
                </div>
                <div class="h-full w-full flex-col justify-end"></div>

                <div
                    class="size-64 absolute top-0 left-16 flex flex-col justify-end items-center"
                    style={{
                        backgroundImage: 'url("/unicorn-shirt.png")',
                        backgroundSize: "cover",
                        backgroundPosition: "center",
                    }}
                >
                    <div class="text-2xl font-mono font-bold">#864,000</div>
                    <div
                        class="text-lg font-mono opacity-80 font-medium -mt-1 -mb-4"
                    >
                        BSR
                    </div>
                </div>

                <div
                    class="size-64 absolute -top-12 -left-24 -z-10 flex flex-col justify-end items-center scale-[.85] blur-[4px] -rotate-6"
                    style={{
                        backgroundImage: 'url("/vibes-shirt.png")',
                        backgroundSize: "cover",
                        backgroundPosition: "center",
                    }}
                >
                    <div class="text-2xl font-mono font-bold">#1,235,000</div>
                </div>

                <div
                    class="size-64 absolute top-12 -right-24 -z-10 flex flex-col justify-end items-center scale-[.85] blur-[4px] rotate-6"
                    style={{
                        backgroundImage: 'url("/rocket-shirt.png")',
                        backgroundSize: "cover",
                        backgroundPosition: "center",
                    }}
                >
                    <div class="text-2xl font-mono font-bold">#184,000</div>
                </div>

                <div>
                    <h3 class="text-3xl mb-2 font-bold">RankWrangler</h3>
                    <p
                        class="mb-4 font-mono font-medium tracking-tight text-[17px] opacity-90"
                    >
                        See BSR's and listing data directly in Amazon Search
                        results.
                    </p>
                    <div class="flex justify-between items-center">
                        <div
                            class="rounded-lg px-2 bg-[#ffd0ba] items-center flex gap-0 leading-5 text-[#612205]"
                        >
                            <span
                                class="font-mono text-sm uppercase font-medium"
                                >FREE</span
                            >
                            <div class="h-7 w-px bg-[#DC6D3E] shrink-0 mx-2">
                            </div>
                            <span
                                class="font-mono text-sm uppercase font-medium"
                                >BROWSER EXTENSION</span
                            >
                        </div>
                        <div class="flex gap-2 items-center">
                            <HugeiconsIcon
                                icon={ChromeIcon}
                                size={24}
                                color="currentColor"
                                className="transition-colors text-[#ffd0ba]"
                                aria-hidden="true"
                            />
                            <HugeiconsIcon
                                icon={SafariIcon}
                                size={24}
                                color="currentColor"
                                className="transition-colors text-[#ffd0ba]"
                                aria-hidden="true"
                            />
                        </div>
                    </div>
                </div>
            </ProductCard>
            <ProductCard
                cornerRadius={30}
                cornerSmoothing={1}
                className="bg-neutral-200 text-black w-96 hover:scale-100"
            >
                <div class="h-full w-full flex-col justify-end"></div>

                <div>
                    <div class="text-5xl font-black font-display opacity-10">
                        More Products<br />Coming Soon
                    </div>
                </div>
            </ProductCard>
        </div>
    </main>
    {
        recentPosts.length > 0 && (
            <section class="mt-14 bg-indigo-50 pt-7 pb-24 pl-9">
                <div class="flex gap-6">
                    {recentPosts.map((post) => (
                        <Squircle
                            cornerRadius={24}
                            cornerSmoothing={0.8}
                            key={post.id}
                            class="group flex w-96 h-full flex-col justify-between rounded-3xl border border-gray-200 bg-white p-6 shadow-sm transition-all duration-200 hover:-translate-y-1 hover:shadow-md"
                        >
                            <div class="flex flex-1 flex-col justify-between">
                                <div>
                                    <p class="text-xs font-semibold uppercase tracking-wide text-blue-600">
                                        {formatDate(post.data.publishDate)}
                                    </p>
                                    <h3 class="mt-3 text-xl font-semibold text-gray-900">
                                        {post.data.title}
                                    </h3>
                                    <p class="mt-3 text-sm text-gray-600">
                                        {post.data.description}
                                    </p>
                                </div>
                                <a
                                    class="mt-6 inline-flex items-center gap-2 text-sm font-semibold text-blue-600 transition-opacity hover:opacity-80"
                                    href={blogPostHref(post.slug)}
                                >
                                    Read post
                                    <svg
                                        class="h-4 w-4 transition-transform duration-200 group-hover:translate-x-1"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    >
                                        <path d="M5 12h14" />
                                        <path d="m12 5 7 7-7 7" />
                                    </svg>
                                </a>
                            </div>
                        </Squircle>
                    ))}
                    <Squircle
                        cornerRadius={24}
                        cornerSmoothing={0.8}
                        class="group flex w-96 h-full flex-col justify-end"
                    >
                        <div class="flex flex-1 flex-col justify-between">
                            More stuff coming soon!
                        </div>
                    </Squircle>
                </div>
            </section>
        )
    }
</div>
