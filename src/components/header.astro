---
import Logo from "@/components/logo.astro";
import { HugeiconsIcon } from "@merchbaseco/icons";
import {
    Alien01Icon,
    Astronaut01Icon,
    BalloonsIcon,
    BubbleTea01Icon,
    CameraSmile01Icon,
    CottonCandyIcon,
    Cupcake02Icon,
    DoughnutIcon,
    FlowerIcon,
    GameController02Icon,
    GalaxyIcon,
    HotAirBalloonIcon,
    IceCream02Icon,
    InLoveIcon,
    LollipopIcon,
    MagicWand01Icon,
    MachineRobotIcon,
    MilkCoconutIcon,
    MonsterIcon,
    MusicNote02Icon,
    RainbowIcon,
    Rocket01Icon,
    RollerSkateIcon,
    SmileIcon,
    SparklesIcon,
    StarFaceIcon,
    StarsIcon,
    SurfboardIcon,
    SunglassesIcon,
    ZapIcon,
} from "@merchbaseco/icons/core-bulk-rounded";

const site = Astro.site ?? new URL("http://localhost/");
const homeHref = new URL("./", site).pathname;
const blogHref = new URL("./blog/", site).pathname;
const isHomePage = Astro.url.pathname === "/";
const aboutHref = isHomePage ? "#about" : new URL("./about/", site).pathname;
const isBlogPage = Astro.url.pathname.startsWith("/blog");
const isAboutPage = Astro.url.pathname.startsWith("/about");

const funIcons = [
    Alien01Icon,
    Astronaut01Icon,
    Rocket01Icon,
    GalaxyIcon,
    RainbowIcon,
    StarsIcon,
    SparklesIcon,
    MagicWand01Icon,
    BalloonsIcon,
    HotAirBalloonIcon,
    Cupcake02Icon,
    IceCream02Icon,
    DoughnutIcon,
    CottonCandyIcon,
    LollipopIcon,
    BubbleTea01Icon,
    MilkCoconutIcon,
    CameraSmile01Icon,
    GameController02Icon,
    MachineRobotIcon,
    MonsterIcon,
    RollerSkateIcon,
    SurfboardIcon,
    SunglassesIcon,
    FlowerIcon,
    InLoveIcon,
    SmileIcon,
    StarFaceIcon,
    MusicNote02Icon,
    ZapIcon,
] as const;

const shuffledIcons = [...funIcons].sort(() => Math.random() - 0.5);
const marqueeIcons = [...shuffledIcons, ...shuffledIcons];
---

<header class="flex w-full items-center gap-8 overflow-hidden">
    <a
        href={homeHref}
        class="group shrink-0 inline-flex items-center gap-2 transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-gray-900"
        data-logo-hover-target
    >
        <Logo />
        <span
            class="font-display text-5xl font-extrabold tracking-tight from-gray-900 to-gray-950 text-transparent bg-clip-text bg-gradient-to-br hover:text-indigo-600"
        >
            MerchBase
        </span>
    </a>
    <div
        class="relative ml-auto flex min-w-0 flex-1 overflow-hidden icon-marquee-container"
    >
        <div
            class="marquee-fade-start pointer-events-none absolute inset-y-0 left-0 w-24"
        >
        </div>
        <div class="icon-marquee flex w-max items-center gap-9">
            {
                marqueeIcons.map((icon, index) => (
                    <HugeiconsIcon
                        icon={icon}
                        size={48}
                        color="currentColor"
                        className="h-12 w-12 shrink-0 text-gray-900 opacity-20"
                        aria-hidden="true"
                        key={`marquee-icon-${index}`}
                    />
                ))
            }
        </div>
    </div>
</header>

<style>
    @keyframes icon-marquee {
        0% {
            transform: translateX(-50%);
        }
        100% {
            transform: translateX(0);
        }
    }

    .icon-marquee {
        animation: icon-marquee 80s linear infinite;
        will-change: transform;
    }

    .icon-marquee-container {
        mask-image: linear-gradient(
            90deg,
            transparent 0%,
            black 12%,
            black 100%
        );
        -webkit-mask-image: linear-gradient(
            90deg,
            transparent 0%,
            black 12%,
            black 100%
        );
    }

    .marquee-fade-start {
        background: linear-gradient(
            90deg,
            rgba(255, 255, 255, 1) 0%,
            rgba(255, 255, 255, 0.75) 45%,
            rgba(255, 255, 255, 0) 100%
        );
        backdrop-filter: blur(6px);
    }

    @media (prefers-reduced-motion: reduce) {
        .icon-marquee {
            animation: none;
            transform: translateX(0);
        }
    }
</style>
