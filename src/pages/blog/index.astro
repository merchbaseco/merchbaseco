---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf(),
);
---

<BaseLayout title="Blog Â· MerchBase">
  <main class="mx-auto max-w-5xl px-6 py-16">
    <header class="mb-12 text-center">
      <h1 class="text-4xl font-bold tracking-tight text-gray-900">MerchBase Blog</h1>
      <p class="mt-4 text-lg text-gray-600">
        Field notes, product updates, and resources for print on demand sellers.
      </p>
    </header>

    <section class="space-y-8">
      {posts.map((post) => {
        const formattedDate = post.data.publishDate.toLocaleDateString("en-US", {
          month: "long",
          day: "numeric",
          year: "numeric",
        });

        return (
          <article class="rounded-3xl border border-gray-200 bg-white p-8 shadow-sm transition-shadow hover:shadow-md" key={post.id}>
            <a class="block" href={`/blog/${post.slug}/`}>
              <p class="text-sm font-medium uppercase tracking-wide text-blue-600">{formattedDate}</p>
              <h2 class="mt-3 text-2xl font-semibold text-gray-900">{post.data.title}</h2>
              <p class="mt-3 text-base text-gray-600">{post.data.description}</p>
              <div class="mt-4 inline-flex items-center gap-2 text-sm font-medium text-blue-600">
                <span>Read more</span>
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14" />
                  <path d="m12 5 7 7-7 7" />
                </svg>
              </div>
            </a>
          </article>
        )
      })}
    </section>
  </main>
</BaseLayout>
